<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="597px" preserveAspectRatio="none" style="width:942px;height:597px;background:#FFFFFF;" version="1.1" viewBox="0 0 942 597" width="942px" zoomAndPan="magnify"><defs/><g><!--MD5=[b7a02f691e3c45f485681b2a91ea968a]
cluster podman--><g id="cluster_podman"><rect fill="#FFFFFF" height="579" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="858" x="12" y="12.6885"/><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="102" x="390" y="35.1094">Podman</text></g><!--MD5=[8f58d86e465a6a32e5c931ecc1fe886f]
entity lfs--><g id="elem_lfs"><path d="M116,342.1885 L157,342.1885 A3.75,3.75 0 0 1 159.5,344.6885 L166.5,363.1885 L234,363.1885 A2.5,2.5 0 0 1 236.5,365.6885 L236.5,393.9854 A2.5,2.5 0 0 1 234,396.4854 L116,396.4854 A2.5,2.5 0 0 1 113.5,393.9854 L113.5,344.6885 A2.5,2.5 0 0 1 116,342.1885 " fill="#F5D0C4" style="stroke:#333333;stroke-width:1.0;"/><line style="stroke:#333333;stroke-width:1.0;" x1="113.5" x2="166.5" y1="363.1885" y2="363.1885"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="93" x="123.5" y="383.1836">File System</text></g><!--MD5=[fb005de1c6cbfeb3c47b9f1813e2e975]
entity mariadb--><g id="elem_mariadb"><path d="M302,494.1885 C302,484.1885 380,484.1885 380,484.1885 C380,484.1885 458,484.1885 458,494.1885 L458,549.4854 C458,559.4854 380,559.4854 380,559.4854 C380,559.4854 302,559.4854 302,549.4854 L302,494.1885 " fill="#F5D0C4" style="stroke:#333333;stroke-width:1.0;"/><path d="M302,494.1885 C302,504.1885 380,504.1885 380,504.1885 C380,504.1885 458,504.1885 458,494.1885 " fill="none" style="stroke:#333333;stroke-width:1.0;"/><image height="30" width="102" x="329" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAAAeCAIAAABRzPyZAAADGElEQVR4Xu2ZsY7UMBRF5z+gmQ7RUSBRb0GLhCiptqOiiERHtSUN0lQUdJGQqEF8APsBNHwCn5Cei+/O1Vvf2EmGyWwyWulqlDw/O/Hx87Od2XS/ru9Q118+bx8+gLxosdq4aVa9fH5BRtTV2zf3yIr6/f0r0LQfrqKay9f4ffL4kfsvVidCBi6IL2JiWJEXkd1HWY8unj3N4mv3/h3Eeer+S9YpkPl8FDWgdP+Fa3ZkyFMOC7p89QLLpfsvX3eDjLPSnVeheZGVpuTq8lfUjMi0ILqQ9d1/LZoRWSnEoD8/f7j/WjQXsgovJH73X5FmQVbh1Z4kkc0axUdGhn2WdvklOTKcpbypLp0Z3DhGyKFudOGEy4Qrffv0MTpgGxRLaTwOMoIYhEVlr9WVe1iyH0tAlsUjIeoWyLQZwriy6HBkaIunxZGkqN5EhlfxQAPZXmSwC7o6zIt2H5U+MXtrOTIaIV5HZN1+CCcjw9YUmJrC7mFQPivbtIA6HT4iosTbw4hucMBjRHDi6DgRW6ObarXpc4CKHFms/r/IpgZUrxwZhxS/kQ4igu+qAde8iD4RWey87PBRCxS583oMMo2NjKOQtemTlvd/qkDcz5Wx2xVjxqteWrJnxjHIgBg+GDAF9TAywEI17/8B8hDrbneAgYYXVWiM7PysyGRn0A0gO0pwUdh/1JHp2i2ZcbC0ZM+MU5GxqIYMzaFR73xFaDELSSyRvODy6k+JveLjYvZRaZu+f5TqlpChqWxPE3NiL7ImpMUMGTtYQ1bfxPcqq7JLHxFlH0RWv21SJuY1c/8gMl6r2+3+6zlvOUJoiq/KophtmSJ26VOVKhaRHcCrNWSMLBn9GyzGMxvnbH3AbXRgjKhjcvZa2S1rKVfKLqHIIw4WOaj0BhmmDzdcVHN728U0BAcix2/8bw12OKi6au3SXpd/LGm2bvsCbV3a1BdEoMxiviQMQkST0RHfc0DW7f+OdV5TuxcbmVp3RfqHLOPFCeXLU11xO7JNU9t9zkM3yKI8Cw4Kiw7PUmzBz9jnpOKKOUkkteov+uP1F3IqS9MAX1zJAAAAAElFTkSuQmCC" y="508.1885"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="136" x="312" y="551.1836">(grafana database)</text></g><!--MD5=[97029dda41c7f1332efacff3a5502fd8]
entity grafana--><g id="elem_grafana"><rect fill="#D4E0B6" height="107.5938" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="158" x="493" y="467.6885"/><image height="55" width="51" x="546.5" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAA3CAIAAAAuUuVrAAACsElEQVR4XtWZMW4VMRCG31k5AMWrEBUV6SgoqBAdTWqE0iNxAOQDcBQmTBgm843H9nr1ENJXROt/xt96134vyaX9/Hou11cv3n14zeurXHhpB9EyOLrEmWZea1/uNDNqXfce6zlmYkCtzWU7x4xCxuFlO8Hs/st7CpGg6IfYs22acfpjpOtamT18+/Tx81spE+RnP8Tum3D2xIxlN4Aa0ezN3UuW3YDbmekL8P3HvTCzRcZmxck0hN1TWCjIioRYNJNbZFkNm87APrLbfCCapTUFLF+i6LZlxtoD9HoeN2PhYfzLbc80MWsTcizZxMvplSNmzJ+C9ddly818jjCcIhOEQjnYGPP4KZbNmCSsCoRPYda2082WDmqWtz/zyuqumck5zKRx4JMtXTwdys16czBp9Fard90IR3+rzVivMNkrYaBle0Lho7j2zGTNSPrNM80zUITTErmSmMkdsFJI3wlr1Jsjhc1DoaxCNGNBWukR42GGDPs/M2O6qDTk/oYZ4u9HCW/LXzOqBNg9FBaPO6We4smMIcIdFGo5VMMp/OijGRMpPHgUua6BnnoPKzT86IJZqPToaHGspMhHUNH/wukL2F0ZBlIGa6a/gk9SvOOW4VAP9vejj0+TiQJOoMijGWYCbO5rn/am/f1iSLFsMuST4mp/GUk3B5srOvrspGUohXN4eJPMtHIuDcRPJ7k5RglnWoU9Q/9oZoRHQ1gyD7uxeddspgXzM7APaUOzYSPma9iBaHJsNvPmsSqFhYbsm7Drx2bt93aboffrpJ4dBSxpk2ZtWu4A6VHX/rlZcW5Pmcltsek+hVabNJMXiH034SyB/9xsuLlW6e1iz5RZ6+8A21lL68r+5LhZb7cbxb5hmMyayZLo9y0OFei/KQLDW1JmzXYIZgyk3MJMWdISfgFpcEe7wJWk6gAAAABJRU5ErkJggg==" y="477.6885"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="66" x="539" y="545.6836">Grafana</text><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="138" x="503" y="561.9805">(UI to view the logs)</text></g><!--MD5=[24ae6a5474e916cd85c833de88942229]
entity loki--><g id="elem_loki"><rect fill="#D4E0B6" height="52.5938" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="197" x="271.5" y="342.6885"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="33" x="353.5" y="365.6836">Loki</text><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="177" x="281.5" y="381.9805">(log aggregation system)</text></g><!--MD5=[272b21477ce7f2b0fbed403921b28491]
entity fluentd--><g id="elem_fluentd"><rect fill="#D4E0B6" height="52.5938" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="349" x="503.5" y="342.6885"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="61" x="647.5" y="365.6836">Fluentd</text><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="329" x="513.5" y="381.9805">(intermediate service used to pass logs to loki)</text></g><!--MD5=[3e7456bc247c8781287bc366de922c77]
entity sourceprimary--><g id="elem_sourceprimary"><rect fill="#8ABDED" height="68.8906" rx="10" ry="10" style="stroke:#333333;stroke-width:1.0;" width="247" x="606.5" y="56.6885"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="55" x="702.5" y="79.6836">Source</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="63" x="698.5" y="95.9805">primary</text><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="227" x="616.5" y="112.2773">(a source of the primary events)</text></g><!--MD5=[cf586895d563e258b90aebb9608ec115]
entity sourcesecondary--><g id="elem_sourcesecondary"><rect fill="#8ABDED" height="68.8906" rx="10" ry="10" style="stroke:#333333;stroke-width:1.0;" width="265" x="306.5" y="56.6885"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="55" x="411.5" y="79.6836">Source</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="83" x="397.5" y="95.9805">secondary</text><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="245" x="316.5" y="112.2773">(a source of the secondary events)</text></g><!--MD5=[111d468c44e6bcb556ceaf32144eae4c]
entity sourcetertiary--><g id="elem_sourcetertiary"><rect fill="#8ABDED" height="68.8906" rx="10" ry="10" style="stroke:#333333;stroke-width:1.0;" width="243" x="28.5" y="56.6885"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="55" x="122.5" y="79.6836">Source</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="63" x="118.5" y="95.9805">tertiary</text><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="223" x="38.5" y="112.2773">(a source of the tertiary events)</text></g><!--MD5=[9430d1ccdf9167f5a1d15e55ab0b1fa2]
entity logspoutprimary--><g id="elem_logspoutprimary"><rect fill="#D4E0B6" height="85.1875" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="265" x="588.5" y="185.6885"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="77" x="682.5" y="208.6836">LogSpout</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="63" x="689.5" y="224.9805">primary</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="243" x="599.5" y="241.2773">//(collects logs from all containers</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="245" x="598.5" y="257.5742">labeled `service.group:primary`)//</text></g><!--MD5=[a145708ea756fcd68d9c3d1092ac9545]
entity logspoutsecondary--><g id="elem_logspoutsecondary"><rect fill="#D4E0B6" height="85.1875" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="282" x="271" y="185.6885"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="77" x="373.5" y="208.6836">LogSpout</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="83" x="370.5" y="224.9805">secondary</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="243" x="290.5" y="241.2773">//(collects logs from all containers</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="262" x="281" y="257.5742">labeled `service.group:secondary`)//</text></g><!--MD5=[8fc3522a43f8c7199df5e09e5bb0188e]
entity user--><g id="elem_user"><ellipse cx="903" cy="339.6885" fill="#FFFFFF" rx="8" ry="8" style="stroke:#333333;stroke-width:1.0;"/><path d="M903,347.6885 L903,374.6885 M890,355.6885 L916,355.6885 M903,374.6885 L890,389.6885 M903,374.6885 L916,389.6885 " fill="none" style="stroke:#333333;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31" x="887.5" y="404.6836">User</text></g><!--MD5=[7e96e389324513f59f0469e2a1ed6ddb]
entity grafanaui--><g id="elem_grafanaui"><ellipse cx="899" cy="521.6885" fill="#FFFFFF" rx="8" ry="8" style="stroke:#333333;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="73" x="862.5" y="551.6836">Grafana UI</text></g><!--MD5=[0d670bdc34f97218803734b58966db38]
reverse link mariadb to grafana--><g id="link_mariadb_grafana"><path d="M463.514,549.3377 C473.341,550.0866 483.168,549.9514 492.995,548.932 " fill="none" id="mariadb-backto-grafana" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="458.375,548.8655,466.9716,553.6716,463.3541,549.3226,467.703,545.7051,458.375,548.8655" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[9d5c330da2f3c7a421ed843f4bb54b83]
link mariadb to grafana--><g id="link_mariadb_grafana"><path d="M458.375,494.5115 C468.202,493.4545 478.029,493.2815 487.856,493.9925 " fill="none" id="mariadb-to-grafana" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="492.995,494.4445,484.3806,489.6704,488.0143,494.0058,483.6788,497.6395,492.995,494.4445" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[384c936f98e7acdbf5330bcfd2f49c12]
reverse link lfs to loki--><g id="link_lfs_loki"><path d="M241.839,387.4355 C251.668,388.7195 261.497,389.3865 271.326,389.4355 " fill="none" id="lfs-backto-loki" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="236.699,386.7085,245.0503,391.9293,241.6497,387.4086,246.1704,384.0081,236.699,386.7085" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[9eafc0057af7e8c821b31bd2938b4b6a]
link lfs to loki--><g id="link_lfs_loki"><path d="M236.699,351.6685 C246.528,350.1695 256.357,349.2875 266.186,349.0235 " fill="none" id="lfs-to-loki" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="271.326,348.9415,262.2632,345.086,266.3266,349.0215,262.3911,353.0849,271.326,348.9415" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[70d827d4966d5655bc7a887ff0ced7f7]
link sourceprimary to logspoutprimary--><g id="link_sourceprimary_logspoutprimary"><path d="M727.752,125.9065 C726.667,142.1845 725.346,161.9955 724.162,179.7635 " fill="none" id="sourceprimary-to-logspoutprimary" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="723.799,185.2065,728.3867,176.4914,724.1304,180.2175,720.4042,175.9612,723.799,185.2065" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[6a1cdbcd822bc57d36a81c3819147fe0]
link sourcesecondary to logspoutsecondary--><g id="link_sourcesecondary_logspoutsecondary"><path d="M432.256,125.9065 C428.973,142.3255 424.97,162.3375 421.393,180.2225 " fill="none" id="sourcesecondary-to-logspoutsecondary" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="420.396,185.2065,426.0825,177.1651,421.376,180.3035,418.2376,175.597,420.396,185.2065" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[be77ef1f20618280c0f647171afc4fe9]
link sourcetertiary to logspoutsecondary--><g id="link_sourcetertiary_logspoutsecondary"><path d="M215.101,125.7325 C248.75,143.0715 290.243,164.4515 326.449,183.1065 " fill="none" id="sourcetertiary-to-logspoutsecondary" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="331.293,185.6025,325.1257,177.9236,326.8486,183.3117,321.4605,185.0346,331.293,185.6025" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[0e4acb72a37dba4ad075055026cfc41c]
link logspoutprimary to fluentd--><g id="link_logspoutprimary_fluentd"><path d="M708.099,270.8935 C701.439,292.4195 693.463,318.2045 687.394,337.8205 " fill="none" id="logspoutprimary-to-fluentd" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="685.895,342.6685,692.3778,335.2541,687.3738,337.8922,684.7357,332.8881,685.895,342.6685" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[edf2977da53771e5f912cb1f941d7847]
link logspoutsecondary to fluentd--><g id="link_logspoutsecondary_fluentd"><path d="M491.448,270.7045 C534.404,293.1515 586.307,320.2735 624.448,340.2045 " fill="none" id="logspoutsecondary-to-fluentd" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="629.03,342.5985,622.906,334.8851,624.5986,340.2828,619.2009,341.9753,629.03,342.5985" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[02d60668607db911ddb863b82f469c06]
reverse link loki to fluentd--><g id="link_loki_fluentd"><path d="M473.815,369.1885 C483.68,369.1885 493.545,369.1885 503.411,369.1885 " fill="none" id="loki-backto-fluentd" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="468.656,369.1885,477.656,373.1885,473.656,369.1885,477.656,365.1885,468.656,369.1885" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[3fdc2fb758ab6ccb3fbd7087c256e943]
link loki to grafana--><g id="link_loki_grafana"><path d="M394.412,395.7185 C418.065,415.3825 454.665,443.2445 488.599,467.6715 " fill="none" id="loki-to-grafana" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="492.724,470.6325,487.7476,462.1333,488.663,467.7156,483.0807,468.631,492.724,470.6325" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[4b590bb5f179e265506513e580afffa5]
reverse link loki to grafana--><g id="link_loki_grafana"><path d="M418.869,398.5315 C447.496,417.9405 483.557,444.2765 513.614,467.5255 " fill="none" id="loki-backto-grafana" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="414.701,395.7185,419.9264,404.0668,418.8465,398.514,424.3993,397.4341,414.701,395.7185" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[dfe812c695ab960feed5c5d028278b5e]
link grafanaui to grafana--><g id="link_grafanaui_grafana"><path d="M889.804,526.1161 C811.977,562.5043 734.149,571.3624 656.322,552.6905 " fill="none" id="grafanaui-to-grafana" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="651.195,551.4208,658.9701,557.4662,656.0485,552.6223,660.8925,549.7006,651.195,551.4208" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[6fd5d1c25ebbcdb44a9291efbab13d94]
reverse link grafanaui to grafana--><g id="link_grafanaui_grafana"><path d="M885.144,515.1148 C807.161,479.7555 729.178,472.0355 651.195,491.9565 " fill="none" id="grafanaui-backto-grafana" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="889.804,517.2609,883.3004,509.8647,885.2619,515.1706,879.956,517.1321,889.804,517.2609" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[d44fe36de45c3554f26956fd46f44ca2]
link user to grafanaui--><g id="link_user_grafanaui"><path d="M890.792,407.7775 C887.033,440.2035 887.025,485.2005 891.708,507.3215 " fill="none" id="user-to-grafanaui" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="893.001,512.4314,894.6706,502.7251,891.7743,507.5842,886.9152,504.6878,893.001,512.4314" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[2c046a57a8f0273431cb72f7fda4e6da]
reverse link user to grafanaui--><g id="link_user_grafanaui"><path d="M914.17,412.8165 C915.963,447.5695 912.827,493.8315 905.804,512.4314 " fill="none" id="user-backto-grafanaui" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="913.869,407.7775,910.4135,417.0003,914.1676,412.7686,918.3993,416.5226,913.869,407.7775" style="stroke:#333333;stroke-width:1.0;"/></g><!--MD5=[aa1b0c2b3ac055735cc89a204716c5d7]
@startuml
!theme plain
!include <logos/mariadb>
!include <logos/grafana>
!include <logos/cassandra>
!include <awslib/AWSSimplified>

<style>
componentDiagram {
  BackGroundColor white
  LineThickness 1
  LineColor #333333
}
document {
  BackGroundColor white
}
</style>

' skinparam monochrome true
skinparam defaulttextalignment center

skinparam sequence {
    ArrowColor #333333
}

skinparam rectangle {
    RoundCorner<< round20 >> 20
    RoundCorner<< round30 >> 30
    RoundCorner<< round40 >> 40
    RoundCorner<< round50 >> 50
}

actor "User" as user

interface "Grafana UI" as grafanaui

rectangle "Podman" as podman {
folder "**File System**" as lfs #f5d0c4

database "<$mariadb>\n//(grafana database)//" as mariadb #f5d0c4
'database "<$cassandra>\n//(loki database)//" as cassandra #f5d0c4

rectangle "<$grafana>\n**Grafana**\n//(UI to view the logs)//" as grafana #d4e0b6
rectangle "**Loki**\n//(log aggregation system)//" as loki #d4e0b6

rectangle "**Fluentd**\n//(intermediate service used to pass logs to loki)//" as fluentd #d4e0b6

rectangle "**Source**\n**primary**\n//(a source of the primary events)//" as sourceprimary <<round20>> #8abded
rectangle "**Source**\n**secondary**\n//(a source of the secondary events)//" as sourcesecondary <<round20>> #8abded
rectangle "**Source**\n**tertiary**\n//(a source of the tertiary events)//" as sourcetertiary <<round20>> #8abded

rectangle "**LogSpout**\n**primary**\n//(collects logs from all containers\nlabeled `service.group:primary`)//" as logspoutprimary #d4e0b6
rectangle "**LogSpout**\n**secondary**\n//(collects logs from all containers\nlabeled `service.group:secondary`)//" as logspoutsecondary #d4e0b6
}

grafana -left-> mariadb
grafana <-left- mariadb

'loki -left-> cassandra
'loki <-left- cassandra
loki -left-> lfs
loki <-left- lfs

sourceprimary -down-> logspoutprimary
sourcesecondary -down-> logspoutsecondary
sourcetertiary -down-> logspoutsecondary

logspoutprimary -down-> fluentd
logspoutsecondary -down-> fluentd

fluentd -left-> loki

loki -down-> grafana
loki <-down- grafana

grafanaui - -right- -> grafana
grafanaui <- -right- - grafana

user -down-> grafanaui
user <-down- grafanaui
@enduml

@startuml







<style>
  root {
    BackgroundColor white
    FontColor black
    FontName Verdana
    HyperLinkColor blue
    LineColor black
    LineThickness 1
    Margin 5
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  header {
    LineThickness 0
  }
  node {
    MaximumWidth 300
  }
  title {
    FontSize 22
    LineThickness 0
  }
</style>

skinparam ArrowLollipopColor black
skinparam BackgroundColor white
skinparam DefaultFontName Verdana
skinparam DefaultMonospacedFontName Courier
skinparam LifelineStrategy nosolid
skinparam ParticipantPadding 10
skinparam SequenceLifeLineBorderColor black
skinparam Shadowing false
skinparam UseBetaStyle true

skinparam Activity {
  BackgroundColor white
  BarColor black
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam Boundary {
  FontColor black
}
skinparam Box {
  Padding 5
}
skinparam CircledCharacter {
  FontColor black
  FontName Courier
  Radius 9
}
skinparam Class {
  BackgroundColor white
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam ClassAttribute {
  FontColor black
  FontName Verdana
}
skinparam ClassStereotype {
  FontColor black
  FontName Verdana
}
skinparam Footer {
  FontColor black
  FontName Verdana
}
skinparam Header {
  FontColor black
  FontName Verdana
}
skinparam Hyperlink {
  Color blue
}
skinparam IconPackage {
  Color black
  BackgroundColor white
}
skinparam IconPrivate {
  Color black
  BackgroundColor white
}
skinparam IconProtected {
  Color black
  BackgroundColor white
}
skinparam IconPublic {
  Color black
  BackgroundColor white
}
skinparam Note {
  FontColor black
  FontName Verdana
}
skinparam Object {
  BorderColor black
}
skinparam Package {
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam State {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeA {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeC {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeE {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeI {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeN {
  BackgroundColor white
  BorderColor black
}
skinparam UseCaseStereoType {
  FontColor black
  FontName Verdana
}
sprite $mariadb [102x30/16] {
0000000000000000000000000000000000000000003DD000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000ADDDD7DD000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000002D5555585C000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000005A55DD5885D000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000B5555566AD0000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000D55555556B00000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000C555555593000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000C555555660000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000D5555555D00000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000885555555A00000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000D55555555100000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000D555555559000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000D555555555D000000000000000000000000000000001000000000000000000000000000000
00000000000000000000000000BA5555555555D000002000000050000000000000000008000000000000788888400003888800
000000000000000000000005DA5555555555554000008000000080000000000000000000000000000000710000780003600280
00000000000000000006DDA5555555555555590000008200000480000004400100105001000004400100710000077003600080
0000000000000000CD8555555555555555555D0000051800000852000683287800883008000783285800710000008003600080
00000000000000DA555555555555555555555D0000070720004607002800004800810008004700006800710000008003878800
0000000000005C5555555555555555555555A30000080080008008008000000800800008008000000800710000008003612780
00000000000C655555555555555555555555D00000080072037008008000000800800008008000000800710000008003600038
0000000000C555555555555555555555555BD00000080008080008008000000800800008008000000800710000008003600008
00000000017555555555555555865555955DD00000080007570008005600000800800008007400002800710000081003600058
000000000D5555555555555555D55556B5D5D00000080000800008000870048800800008000860058800754568830003766880
00000000D55555555555555555D5555DDD55B00000110000300003100028830300300003000038820300333321000001333100
009CDDD85555BDC767ADDDCBCDD5556D2D655D0000000000000000000000000000000000000000000000000000000000000000
C655555555980000000000001D6555D000DDDD0000000000000000000000000000000000000000000000000000000000000000
0AD555555D000000000000000D555D000000000000000000000000000000000000000000000000000000000000000000000000
0D55556D6000000000000000C555D8000000000000000000000000000000000000000000000000000000000000000000000000
0DDDDD100000000000000004A5DD20000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000DDA0000000000000000000000000000000000000000000000000000000000000000000000000000
}
sprite $grafana [51x55/16] {
000000000000000000000000000750000000000000000000000
000000000000000000000000007777000000000000000000000
000000000000000000000000077777700000000000000000000
000000000000000000000000777777750000000000000000000
000000000000000000000005777777770000000000000000000
000000000000000000000007777777775000000000000000000
000000000000000000000037777777777775000077770000000
000000000000000000007777777777777777777777775000000
000000000245520000777777777777777777777777777000000
000000777777777777777777777777777777777777777000000
000006777777777777777777777777777777777777777000000
000006777777777777777777777775211377777777777000000
000005777777777777777777700000000000007777777600000
000001777777777777777760000000000000000077777740000
000000777777777777777000000000000000000000777770000
000000777777777777770000000000000000000000077777000
000000777777777777700000000000000000000000005777400
000000077777777777000000000000000000000000000577700
000000077777777770000000000000000000000000000077740
000000007777777770000000000000477777300000000007770
000000007777777700000000000077777777777200000000770
000000007777777700000000005777777777777770000000773
000000007777777100000000067777777777777777200000077
000000067777777000000000577777775777777777740000077
000000077777777000000000777770000000477777771000007
000000066666665000000006666600000000006666666000006
000000166666662000000006666000000000000666666600005
000006666666660000000026660000000000000066666600000
000066666666660000000056660000000000000026666650000
000666666666660000000066620000000000000006666660000
006666666666661000000066600000000000000006666660000
066666666666664000000046610000000000000004666660000
066666666666666000000006650000000000000003666660000
666666666666666000000006660000000000000004666660000
555555555555555200000000555000000000000005555550000
055555555555555500000000355500000000000005555555000
004555555555555520000000025555324510000005555555500
000055555555555550000000000455555000000055555555500
000001555555555555000000000000000000000055555555550
000000002555555555500000000000000000000555555555550
000000000055555555550000000000000000005555555555550
000000000005555555555000000000000000055555555555500
000000000001555555555550000000000000555555555420000
000000000000444444444444430000000244444444440000000
000000000000044444444444444444444444444444410000000
000000000000044444444444444444444444444444200000000
000000000000144444444444444444444444444442000000000
000000000000344444444444444444444444444400000000000
000000000000344444444444444444444444444400000000000
000000000000244444444444444444444444444300000000000
000000000000044444444100344444444444444000000000000
000000000000044444410000000000144444444000000000000
000000000000033200000000000000013333331000000000000
000000000000000000000000000000000333330000000000000
000000000000000000000000000000000003300000000000000
}
sprite $cassandra [51x33/16] {
000000000000000000000000000000001000000000000000000
000000000000000000000003064000020000600100300000000
00000000000000000000045AB6CCCCC61C0C00000C0B0500000
0000000000000000003CCCCCCCCCCCCCCCCA1080B0C0C000A00
0000000000000006CCCCBA6BAAAAAAB47CCCCC0C2C2C000C001
0000000000000BCCBA9900993998999900559CCCC6C109C0070
00000000000BC7209949099235959949A012256CCCCCCC12C00
0000000008C7220099A1796600083909900222255CCCCCC4000
00000000CB32220099909900000000998002222224474400000
0000006C422222009993A10000000389200222222BCA2000000
00000CC0022222009994210000000499002222222CCC1000000
0000C7000222220009209330000029B500222222CCCC3200000
000C20000222222007008900002094900122222CCCC57000000
0060000000222221009B909710495900022222CC004B0600000
0100000000122222100405699599800022222CCC80001010000
50000000000022222200009999500002222CCC5C00000000000
038CCCCCCCCCC92222210000000002223CCCC1A2C0000000000
00000000001CC9CCC932222222223ACCCC39C00012000000000
0000000000C400B31BCCCCCCCCCCCCC63980570001000000000
00000000061008000C789CB3C24CC38500A0060000100000000
000000000000000014070C10C00C0C0A0001009000000000000
000000000000000020053500500C0100000A000000000000000
00000000000000000000C000000B00800007000000000000000
000000000000000000002000000400600001000000000000000
000000000000000000040000000000000000000000000000000
0000000000000000000000000020000000000BC000000000000
0000000000000000000000000000000000000CB000000000000
0000000000000000000000000000000000000C4000000000000
0000CCC00CCCC0CCC0CCB02CCC60C1CC00CCCC13C9C0BCCC000
000AC000CA0CB0C002C000C10C10CB0C09C00C08C906C00C000
000CA000C00C60CC40CC26C02C05C00C0C70BC0BC00C80CC000
000CC090C0CC000CB00C9AC0CC0AC06C0C94CC0CC00C84CC000
0006CC20CC0C0CCC0CCC01CC1C0C909C0BCA9C0C200BC5CC000
}


hide stereotype





<style>
componentDiagram {
  BackGroundColor white
  LineThickness 1
  LineColor #333333
}
document {
  BackGroundColor white
}
</style>

skinparam defaulttextalignment center

skinparam sequence {
    ArrowColor #333333
}

skinparam rectangle {
    RoundCorner<< round20 >> 20
    RoundCorner<< round30 >> 30
    RoundCorner<< round40 >> 40
    RoundCorner<< round50 >> 50
}

actor "User" as user

interface "Grafana UI" as grafanaui

rectangle "Podman" as podman {
folder "**File System**" as lfs #f5d0c4

database "<$mariadb>\n//(grafana database)//" as mariadb #f5d0c4

rectangle "<$grafana>\n**Grafana**\n//(UI to view the logs)//" as grafana #d4e0b6
rectangle "**Loki**\n//(log aggregation system)//" as loki #d4e0b6

rectangle "**Fluentd**\n//(intermediate service used to pass logs to loki)//" as fluentd #d4e0b6

rectangle "**Source**\n**primary**\n//(a source of the primary events)//" as sourceprimary <<round20>> #8abded
rectangle "**Source**\n**secondary**\n//(a source of the secondary events)//" as sourcesecondary <<round20>> #8abded
rectangle "**Source**\n**tertiary**\n//(a source of the tertiary events)//" as sourcetertiary <<round20>> #8abded

rectangle "**LogSpout**\n**primary**\n//(collects logs from all containers\nlabeled `service.group:primary`)//" as logspoutprimary #d4e0b6
rectangle "**LogSpout**\n**secondary**\n//(collects logs from all containers\nlabeled `service.group:secondary`)//" as logspoutsecondary #d4e0b6
}

grafana -left-> mariadb
grafana <-left- mariadb

loki -left-> lfs
loki <-left- lfs

sourceprimary -down-> logspoutprimary
sourcesecondary -down-> logspoutsecondary
sourcetertiary -down-> logspoutsecondary

logspoutprimary -down-> fluentd
logspoutsecondary -down-> fluentd

fluentd -left-> loki

loki -down-> grafana
loki <-down- grafana

grafanaui - -right- -> grafana
grafanaui <- -right- - grafana

user -down-> grafanaui
user <-down- grafanaui
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 UTC 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>